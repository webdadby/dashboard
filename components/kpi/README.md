# Документация по компонентам KPI

## Общее описание

Модуль KPI (Key Performance Indicators) предназначен для управления показателями эффективности сотрудников. Он позволяет создавать различные типы метрик, назначать их сотрудникам и отслеживать результаты.

## Типы метрик

В системе реализованы следующие типы метрик:

1. **Ступенчатая метрика (tiered)** - метрика с разными ставками вознаграждения в зависимости от достигнутого диапазона значений.
   - Пример: 0-10 единиц = 100₽ за единицу, 11-20 единиц = 150₽ за единицу, более 20 единиц = 200₽ за единицу.

2. **Метрика с умножением (multiply)** - метрика, где вознаграждение рассчитывается путем умножения базовой ставки на достигнутое значение.
   - Пример: 50₽ за каждую единицу.

3. **Процент от суммы (sum_percentage)** - метрика, где вознаграждение рассчитывается как процент от общей суммы.
   - Пример: 10% от общей суммы продаж.

## Основные компоненты

### MetricForm.tsx

Компонент формы для создания и редактирования метрик. Позволяет:
- Выбрать тип метрики
- Задать название и описание
- Настроить параметры в зависимости от типа метрики
- Назначить метрику сотрудникам

### MetricsList.tsx

Компонент для отображения списка всех метрик с возможностью:
- Просмотра деталей метрики
- Редактирования метрики
- Удаления метрики
- Назначения метрики сотрудникам

### ResultsDashboard.tsx

Панель результатов, отображающая достижения сотрудников по метрикам за выбранный период:
- Фильтрация по периоду
- Группировка по сотрудникам
- Визуализация результатов

### EmployeeKpiCard.tsx

Карточка с результатами KPI для конкретного сотрудника, включающая:
- Общую сумму вознаграждения
- Детализацию по каждой метрике
- Прогресс выполнения

### KpiTypes.ts

Файл с типами данных для модуля KPI:
- Определения интерфейсов для метрик разных типов
- Типы для сотрудников и результатов
- Вспомогательные типы для форм и API

### useKpiData.ts

Хук для загрузки и обработки данных KPI:
- Получение метрик из API
- Получение результатов по метрикам
- Расчет вознаграждений

## Процесс работы с метриками

1. **Создание метрики** - администратор создает метрику, выбирая её тип и параметры
2. **Назначение сотрудникам** - метрика назначается одному или нескольким сотрудникам
3. **Ввод результатов** - по мере выполнения работы, вводятся фактические результаты
4. **Расчет вознаграждений** - система автоматически рассчитывает вознаграждение на основе результатов и параметров метрики
5. **Отображение на дашборде** - результаты отображаются на панели результатов

## Планы по улучшению

1. Разделение компонента MetricForm.tsx на более мелкие компоненты:
   - MetricFormContainer.tsx - основной контейнер формы
   - BaseMetricFields.tsx - общие поля для всех типов метрик
   - EmployeeSelector.tsx - компонент выбора сотрудников
   - TieredMetricFields.tsx - поля для ступенчатых метрик
   - MultiplyMetricFields.tsx - поля для метрик с умножением
   - SumPercentageMetricFields.tsx - поля для метрик с процентом от суммы

2. Добавление новых типов метрик

3. Улучшение визуализации результатов
